import{a as j}from"./chunk-BNZEDEBD.js";import{L as D}from"./chunk-XJQMJ5FV.js";import{a as O}from"./chunk-G55IM4YV.js";import"./chunk-BKZFVQBW.js";import{a as B}from"./chunk-CI3TO52C.js";import{a as S}from"./chunk-ZJO5XFAT.js";import{e as A,f as w,k as N,n as F,s as M,u as k}from"./chunk-3AEYLFKI.js";import{a as T}from"./chunk-HNKJNLW6.js";import"./chunk-AFJOMKLS.js";import{d as I}from"./chunk-TN45MXFT.js";import"./chunk-4C57YJA5.js";import{Bc as x,Cb as P,Fb as v,Gb as f,Qa as r,Qb as l,Ra as g,Rb as p,Yb as _,kb as y,la as E,mb as m,va as C,wa as b,wb as n,xb as a,yb as u}from"./chunk-ZFL4TBTD.js";import"./chunk-4L4RMVSS.js";function L(h,s){if(h&1){let c=P();n(0,"tr")(1,"td",18),l(2),a(),n(3,"td",18),l(4),a(),n(5,"td",19),l(6),a(),n(7,"td",19),l(8),a(),n(9,"td",19),l(10),a(),n(11,"td",19),l(12),a(),n(13,"td",18)(14,"a",20),v("click",function(){let i=C(c).$implicit,t=f();return b(t.onDetail(i))}),u(15,"i",21),a(),n(16,"a",22),u(17,"i",23),a()()()}if(h&2){let c=s.$implicit,e=s.index,i=f();r(),m("width","5%"),r(),p(e+1),r(),m("width","5%"),r(),p(c==null?null:c.id),r(),m("width","30%"),r(),p(c==null?null:c.name),r(),m("width","30%"),r(),p(c==null?null:c.locationText),r(),m("width","30%"),r(),p(c==null?null:c.slotAmount),r(),m("width","30%"),r(),p(i.joinPaymentMethod(c)),r(),m("width","5%"),r(),m("cTooltip","C\u1EADp nh\u1EADt"),r(2),m("cTooltip","X\xF3a")}}var K=(()=>{let s=class s{constructor(e,i,t,o){this.fb=e,this.router=i,this.deviceService=t,this.spinnerService=o,this.products=[{productName:"S\u1EA3n ph\u1EA9m",quantity:"10",price:"10000"},{productName:"S\u1EA3n ph\u1EA9m",quantity:"10",price:"10000"},{productName:"S\u1EA3n ph\u1EA9m",quantity:"10",price:"10000"}],this.itemList=[],this.itemsDefault=[],this.itemsAll=[],this.itemstable=[],this.totalItem=0,this.currentPage=1,this.itemPerPage=10,this.locationList=[]}ngOnInit(){this.formSearch=this.fb.group({deviceName:[""],place:[""]}),this.getAlldevice(),this.locationList=S.LOCATION}getAlldevice(){this.spinnerService.show(),this.deviceService.getAllDevice().subscribe(e=>{console.log("res all device: ",e),this.spinnerService.hide(),e&&e.status&&e.status.code==S.STATUS.SUCCESS&&(e.data.forEach(i=>{i.value=i.name,i.key=i.id}),this.itemsDefault=e.data,this.itemsAll=[...this.itemsDefault],this.totalItem=this.itemsAll.length,this.calculateItems())})}calculateItems(){this.itemstable=this.itemsAll.slice((this.currentPage-1)*this.itemPerPage,(this.currentPage-1)*this.itemPerPage+this.itemPerPage),console.log("this.itemtable",this.itemstable)}pageChange(e){console.log("event page change: ",e),this.currentPage=e,this.calculateItems()}itemPerPageChange(e){console.log("itemPerPageChange: ",e),this.itemPerPage=e,this.calculateItems()}joinSlotCode(e,i){let t=e?.slots;return t&&t.length>0?t.filter(o=>o.currentItem.type===i).map(o=>o.currentItem.code).join(", "):""}joinSlotNumber(e,i){let t=e?.slots;return t&&t.length>0&&t.filter(o=>o.currentItem.type===i).length||0}joinSlotNumberMax(e,i){let t=e?.slots;return t&&t.length>0&&t.filter(o=>o.currentItem.type===i).reduce((o,d)=>o+d.maxItem,0)||0}joinPaymentMethod(e){let i=e?.paymentMethods;return i&&i.length>0?i.map(t=>t.name).join(", "):""}onSearch(){this.itemsAll=[...this.itemsDefault],this.currentPage=1;let e=this.formSearch.value.deviceName||[],i=this.formSearch.value.place||[];((e&&e.length)>0||i&&i.length>0)&&(console.log("arrSearch: ",e),console.log("form search value: ",this.formSearch.value),this.itemsAll=this.itemsAll.filter(t=>e.includes(t.id)||i.includes(t.locationText))),console.log("data after search: ",this.itemsAll,this.itemsDefault),this.totalItem=this.itemsAll.length,this.calculateItems()}onCreate(){this.router.navigate(["operate/device/create"])}onDetail(e){this.router.navigate([`operate/device/update/${e.id}`])}};s.\u0275fac=function(i){return new(i||s)(g(M),g(I),g(O),g(T))},s.\u0275cmp=E({type:s,selectors:[["app-device-management"]],standalone:!0,features:[_],decls:45,vars:11,consts:[[1,"align-items-center",3,"formGroup"],[1,"row"],[1,"col-md-2","col-sm-4","col-xs-12","mt-3"],[1,"form-label","col-form-label"],[1,"col-md-4","col-sm-8","col-xs-12","mt-3"],["formControlName","deviceName",3,"searchable","multiple","items"],["formControlName","place",3,"searchable","multiple","items","bindValue"],[1,"row","mt-3"],[1,"col-12","text-center"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-search"],["type","button",1,"btn","btn-primary-custom","ml-20",3,"click"],[1,"fa","fa-plus"],[1,"mt-3"],[1,"table-responsive","radius-table",2,"width","100%!important"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],[3,"pageChange","itemPerPageChange","currentPage","totalItems"],[1,"text-center",3,"width"],[1,"min-width-cl",3,"width"],[1,"cursor-pointer","hover-color-red","font-size-18","color-black",3,"click","cTooltip"],[1,"fa","fa-pencil-square-o"],[1,"cursor-pointer","hover-color-red","font-size-18","ml-5","color-black",3,"cTooltip"],[1,"fa","fa-trash-o"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"h4"),l(2,"Qu\u1EA3n l\xFD thi\u1EBFt b\u1ECB"),a(),n(3,"div",1)(4,"div",2)(5,"label",3),l(6," T\xEAn m\xE1y"),a()(),n(7,"div",4),u(8,"app-selection",5),a(),n(9,"div",2)(10,"label",3),l(11," \u0110\u1ECBa \u0111i\u1EC3m"),a()(),n(12,"div",4),u(13,"app-selection",6),a()(),n(14,"div",7)(15,"div",8)(16,"button",9),v("click",function(){return t.onSearch()}),u(17,"i",10),l(18," T\xECm ki\u1EBFm"),a(),n(19,"button",11),v("click",function(){return t.onCreate()}),u(20,"i",12),l(21," Th\xEAm m\u1EDBi "),a()()(),n(22,"h5",13),l(23,"Danh s\xE1ch s\u1EA3n ph\u1EA9m"),a(),n(24,"div",14)(25,"table",15)(26,"thead")(27,"tr")(28,"th"),l(29,"#"),a(),n(30,"th"),l(31,"ID m\xE1y"),a(),n(32,"th"),l(33,"T\xEAn m\xE1y"),a(),n(34,"th"),l(35,"\u0110\u1ECBa \u0111i\u1EC3m"),a(),n(36,"th"),l(37,"S\u1ED1 l\u01B0\u1EE3ng h\xE0ng t\u1ED1i \u0111a"),a(),n(38,"th"),l(39,"PTTT"),a(),n(40,"th"),l(41,"thao t\xE1c"),a()()(),n(42,"tbody"),y(43,L,18,15,"tr",16),a()()(),n(44,"app-pagination",17),v("pageChange",function(d){return t.pageChange(d)})("itemPerPageChange",function(d){return t.itemPerPageChange(d)}),a()()),i&2&&(m("formGroup",t.formSearch),r(8),m("searchable",!0)("multiple",!0)("items",t.itemsDefault),r(5),m("searchable",!0)("multiple",!0)("items",t.locationList)("bindValue","value"),r(30),m("ngForOf",t.itemstable),r(),m("currentPage",t.currentPage)("totalItems",t.totalItem))},dependencies:[x,j,k,A,w,N,F,B,D]});let h=s;return h})();export{K as DeviceManagementComponent};
