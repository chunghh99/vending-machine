import{a as Y}from"./chunk-BKZFVQBW.js";import{a as H}from"./chunk-4NQS6MOD.js";import{a as h}from"./chunk-KDM4M3GL.js";import{a as Z}from"./chunk-OPDTKCI5.js";import{a as q}from"./chunk-HNKJNLW6.js";import{A as O,B as U,C as V,b as D,i as A,l as G,m as M,n as L,w as N,x as j,z as B}from"./chunk-EWF54Y3W.js";import"./chunk-4C57YJA5.js";import{c as K,d as g,e as P,f as R,g as J,i as W,k as $,l as z,q as Q,s as X}from"./chunk-2PP4UNEY.js";import{d as w}from"./chunk-TN45MXFT.js";import{Cc as _,Dc as I,Fb as k,Gb as E,Mc as T,Qa as c,Qb as u,Ra as p,Yb as x,Zb as y,ba as C,ga as S,kb as d,la as F,mb as l,wb as o,xa as f,xb as i,ya as v,yb as m}from"./chunk-ZFL4TBTD.js";import"./chunk-4L4RMVSS.js";var ee=(()=>{let t=class t{constructor(e){this.httpClient=e,this.apiUrl="",this.apiUrl=Y.apiUrl}login(e){return this.httpClient.post(`${this.apiUrl}/auth/login`,e)}};t.\u0275fac=function(r){return new(r||t)(S(T))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var oe=()=>({"minWidth.%":44});function re(n,t){n&1&&(o(0,"div",22),u(1," T\xEAn \u0111\u0103ng nh\u1EADp kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng. "),i())}function ae(n,t){if(n&1&&(o(0,"div"),d(1,re,2,0,"div",21),i()),n&2){let s=E();c(),l("ngIf",s.loginForm.controls.username.errors.required)}}function ce(n,t){n&1&&(o(0,"div",22),u(1," M\u1EADt kh\u1EA9u kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng. "),i())}function le(n,t){n&1&&(o(0,"div",22),u(1," M\u1EADt kh\u1EA9u ph\u1EA3i > 6 k\xFD t\u1EF1. "),i())}function me(n,t){if(n&1&&(o(0,"div"),d(1,ce,2,0,"div",21)(2,le,2,0,"div",21),i()),n&2){let s=E();c(),l("ngIf",s.loginForm.controls.password.errors==null?null:s.loginForm.controls.password.errors.required),c(),l("ngIf",s.loginForm.controls.password.errors==null?null:s.loginForm.controls.password.errors.minlength)}}var Fe=(()=>{let t=class t{constructor(e,r,a,b,ne){this.formBuilder=e,this.router=r,this.toastr=a,this.spinnerService=b,this.authService=ne,this.menu=[{name:"B\xE1o c\xE1o giao d\u1ECBch",url:"/report-transaction",icon:"fa fa-area-chart",children:[{name:"Tra c\u1EE9u doanh thu",url:"report-transaction/revenue",icon:"nav-icon-bullet"}]},{name:"V\u1EADn h\xE0nh",url:"/operate",icon:"fa fa-desktop",children:[{name:"V\u1EADn h\xE0nh thi\u1EBFt b\u1ECB",url:"operate/device",icon:"nav-icon-bullet"},{name:"C\u1EADp nh\u1EADt h\xE0ng h\xF3a",url:"operate/product",icon:"nav-icon-bullet"}]},{name:"Ch\u0103m s\xF3c kh\xE1ch h\xE0ng",url:"/customer-care",icon:"fa fa-area-chart",children:[{name:"Tra c\u1EE9u l\u1ECBch s\u1EED mua h\xE0ng",url:"customer-care/purchase-history",icon:"nav-icon-bullet"}]},{name:"Admin",url:"/admin",icon:"fa fa-user",children:[{name:"Khai b\xE1o user",url:"admin/create-user",icon:"nav-icon-bullet"},{name:"Khai b\xE1o qu\u1EA3ng c\xE1o",url:"admin/advertisement-management",icon:"nav-icon-bullet"},{name:"C\u1EA5p l\u1EA1i m\u1EADt kh\u1EA9u",url:"admin/reset-password",icon:"nav-icon-bullet"},{name:"Kh\xF3a t\xE0i kho\u1EA3n",url:"admin/lock-account",icon:"nav-icon-bullet"},{name:"M\u1EDF kh\xF3a t\xE0i kho\u1EA3n",url:"admin/unLock-account",icon:"nav-icon-bullet"}]}]}ngOnInit(){this.loginForm=this.formBuilder.group({username:["",[g.required]],password:["",[g.required,g.minLength(6)]]}),localStorage.clear()}markFormGroupTouched(e){Object.values(e.controls).forEach(r=>{r.markAsTouched(),r instanceof J&&this.markFormGroupTouched(r)})}validField(e){return!!(this.loginForm.controls[e].invalid&&(this.loginForm.controls[e].dirty||this.loginForm.controls[e].touched))}login(){if(this.markFormGroupTouched(this.loginForm),this.loginForm.invalid){console.log(this.loginForm);return}this.spinnerService.show(),this.authService.login(this.loginForm.value).subscribe(e=>{this.spinnerService.hide(),e&&e.status&&e.status.code===h.STATUS.SUCCESS&&(localStorage.setItem(h.MENU,JSON.stringify(this.menu)),localStorage.setItem(h.TOKEN,e?.data?.accessToken),this.router.navigate(["/"]),this.showSuccess())},e=>{this.spinnerService.hide()})}showSuccess(){this.toastr.success("\u0110\u0103ng nh\u1EADp th\xE0nh c\xF4ng")}};t.\u0275fac=function(r){return new(r||t)(p(Q),p(w),p(Z),p(q),p(ee))},t.\u0275cmp=F({type:t,selectors:[["app-login"]],standalone:!0,features:[x],decls:35,vars:5,consts:[[1,"bg-light","dark:bg-transparent","min-vh-100","d-flex","flex-row","align-items-center"],["breakpoint","md"],[3,"formGroup"],[1,"justify-content-center"],["lg","10","xl","8"],[1,"svg-background"],["height","32","width","","src","assets/images/vt-doanh-nghiep.svg"],[1,"text-white","py-5","background-red","border-form",2,"margin-right","10px",3,"ngStyle"],[1,"text-center"],[1,"p-4","border-form",2,"margin-right","10px"],["cForm",""],[1,"mb-3"],["cInputGroupText",""],["cIcon","","name","cilUser"],["formControlName","username","placeholder","T\xEAn \u0111\u0103ng nh\u1EADp",1,"form-control"],[4,"ngIf"],[1,"mb-4"],["cIcon","","name","cilLockLocked"],["placeholder","M\u1EADt kh\u1EA9u","type","password","formControlName","password",1,"form-control"],["xs","12"],["cButton","",1,"px-4","btn-login",3,"click"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(r,a){r&1&&(o(0,"div",0)(1,"c-container",1),m(2,"app-spinner"),o(3,"form",2)(4,"c-row",3)(5,"c-col",4)(6,"div",5),m(7,"img",6),i(),o(8,"c-card-group")(9,"c-card",7)(10,"c-card-body",8)(11,"div")(12,"h2"),u(13,"H\u1EC7 th\u1ED1ng qu\u1EA3n l\xFD m\xE1y b\xE1n h\xE0ng t\u1EF1 \u0111\u1ED9ng"),i()()()(),o(14,"c-card",9)(15,"c-card-body")(16,"form",10)(17,"h1"),u(18,"\u0110\u0103ng nh\u1EADp"),i(),o(19,"div",11)(20,"c-input-group")(21,"span",12),f(),m(22,"svg",13),i(),v(),m(23,"input",14),i(),d(24,ae,2,1,"div",15),i(),o(25,"div",16)(26,"c-input-group")(27,"span",12),f(),m(28,"svg",17),i(),v(),m(29,"input",18),i(),d(30,me,3,2,"div",15),i(),o(31,"c-row")(32,"c-col",19)(33,"button",20),k("click",function(){return a.login()}),u(34," \u0110\u0103ng nh\u1EADp "),i()()()()()()()()()()()()),r&2&&(c(3),l("formGroup",a.loginForm),c(6),l("ngStyle",y(4,oe)),c(15),l("ngIf",a.loginForm.controls.username.invalid&&(a.loginForm.controls.username.dirty||a.loginForm.controls.username.touched)),c(6),l("ngIf",a.validField("password")))},dependencies:[O,V,U,L,G,M,N,j,B,D,A,I,X,W,K,P,R,$,z,_,H],styles:[".btn-login[_ngcontent-%COMP%]{background:#ee0032;border:#ee0032;width:100%}.btn-login[_ngcontent-%COMP%]:active{background:#ff0032;border:#ee0032;color:#fff}.background-red[_ngcontent-%COMP%]{background:#ee0032}.border-form[_ngcontent-%COMP%]{border:1px solid rgba(198,37,31,0)!important;border-radius:6px!important}"]});let n=t;return n})();export{Fe as LoginComponent};
